;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;; GENERAL
DEF VBLANK_START equ $90

DEF LCD_CONTROL equ $FF40

DEF rP1 equ $FF00

DEF rWY equ $FF4A

DEF rWX equ $FF4B

DEF SCREEN_PIXEL_WIDTH equ 160

;; Modos de lectura del Joypad
DEF P1_GET_BTN equ $10
DEF P1_GET_DPAD equ $20
DEF P1_GET_NONE equ $30

;; Bits del joypad combinado en joypad_current
DEF JOYPAD_RIGHT 	equ 0
DEF JOYPAD_LEFT 	equ 1
DEF JOYPAD_UP 		equ 2
DEF JOYPAD_DOWN 	equ 3
DEF JOYPAD_A 		equ 4
DEF JOYPAD_B 		equ 5
DEF JOYPAD_SELECT 	equ 6
DEF JOYPAD_START 	equ 7

DEF rLY equ $FF44

DEF rBGP equ $FF47
DEF rOBP0 equ $FF48
DEF rOBP1 equ $FF49

DEF OAM_START equ $FE00
DEF OAM_TOTAL_SPRITES equ 160

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;,



;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;; ECS
DEF CMP_START_H  = $C0
DEF CMP_START_ADDRESS  = $C000
DEF NUM_ENTITIES = 40
DEF CMP_SIZE  = 4
DEF CMP_TOTALBYTES = NUM_ENTITIES * CMP_SIZE

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;; Info Component
DEF CMP_INFO_H = $C0

;; Structure Info Component
DEF E_ACTIVE 	= 0
DEF E_TYPE 		= 1
DEF E_FLAGS 	= 2



;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;; Avtive / Non active
DEF BYTE_ACTIVE 		= 1 
DEF BYTE_NON_ACTIVE 	= 0

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;; Entity Types
DEF TYPE_PLAYER			= 0 
DEF TYPE_BOSS			= 1
DEF TYPE_MINI_BOSS		= 2
DEF TYPE_BULLET			= 3
DEF TYPE_POWERUP		= 4
DEF TYPE_VERJA          = 5


;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;; Entity Flags
DEF FLAG_CAN_TAKE_DAMAGE 	= %00000001
DEF FLAG_CAN_DEAL_DAMAGE	= %00000010
DEF FLAG_DESTROY_ON_HIT 	= %00000100
DEF FLAG_ENTITY_GOT_DAMAGE  = %00001000



;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;; Sprites Component
DEF CMP_SPRITES_H = $C1
DEF CMP_SPRITES_ADDRESS = $C100

DEF VRAM_TILE_DATA_START equ $8000
DEF VRAM_TILE_SIZE equ $10

DEF SPRITE_SIZE = 4
DEF SPRITE_OFFSET_Y    equ 0
DEF SPRITE_OFFSET_X    equ 1
DEF SPRITE_OFFSET_TILE equ 2 
DEF SPRITE_OFFSET_ATTR equ 3 

DEF SPRITE_ATTR_FLIP_X  equ %10100000  ; Flip horizontal activado
DEF SPRITE_ATTR_FLIP_Y  equ %11000000  ; Flip vertical activado
DEF SPRITE_ATTR_NO_FLIP	equ %10000000  ; Sin flip
def SPRITE_ATTR_PRIORITY_BIT equ 7
def SPRITE_ATTR_FLIP_Y_BIT equ 6
def SPRITE_ATTR_FLIP_X_BIT equ 5

DEF SPRITE_WIDTH equ 8
DEF SPRITE_HEIGHT equ 16

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;; Physics Component
DEF CMP_PHYSICS_P_H = $C2
DEF CMP_PHYSICS_P_ADDRESS = $C200

DEF CMP_PHYSICS_BYTE_P_Y_LOW equ 0
DEF CMP_PHYSICS_BYTE_P_X_LOW equ 1
DEF CMP_PHYSICS_BYTE_HEIGHT  equ 2
DEF CMP_PHYSICS_BYTE_WIDTH   equ 3


DEF CMP_PHYSICS_V_H       equ $C3
DEF CMP_PHYSICS_V_ADDRESS equ $C300

DEF CMP_PHYSICS_BYTE_V_Y_HIGH equ 0
DEF CMP_PHYSICS_BYTE_V_X_HIGH equ 1
DEF CMP_PHYSICS_BYTE_V_Y_LOW  equ 2
DEF CMP_PHYSICS_BYTE_V_X_LOW  equ 3

DEF CMP_PHYSICS_A_H       equ $C4
DEF CMP_PHYSICS_A_ADDRESS equ $C400

DEF CMP_PHYSICS_BYTE_A_Y_HIGH equ 0
DEF CMP_PHYSICS_BYTE_A_X_HIGH equ 1
DEF CMP_PHYSICS_BYTE_A_Y_LOW  equ 2
DEF CMP_PHYSICS_BYTE_A_X_LOW  equ 3

DEF CMP_COLLISIONS_H = $C5
DEF CMP_COLLISIONS_ADDRESS = $C500

DEF CMP_COLLISIONS_OFFSET_Y equ 0
DEF CMP_COLLISIONS_OFFSET_X equ 1
DEF CMP_COLLISIONS_HEIGHT  	equ 2
DEF CMP_COLLISIONS_WIDTH	equ 3

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

; Física del jugador (Q5.3, C2)
DEF PLAYER_SPEED			equ $0100	; +1
DEF PLAYER_SPEED_NEGATIVE 	equ $FF00 	; -1
DEF PLAYER_JUMP_SPEED		equ $FC00	; -5
DEF PLAYER_GRAVITY			equ $0050 	; +1 

DEF PLAYER_INITIAL_POS_X  	equ $13 ; Posición inicial del jugador en X

DEF PLAYER_HEIGHT	equ 16
DEF PLAYER_WIDTH	equ 8


;; Fïsica de la verja
DEF VERJA_HEIGHT   equ 16
DEF VERJA_WIDTH    equ 2

; Física del gorila (Q5.3, C2)
DEF GORILLA_JUMP_SPEED 		equ $FA00   ; -10
DEF GORILLA_SPEED   		equ $0200	; +2 
DEF GORILLA_SPEED_NEGATIVE  equ $FE00	; -2 
DEF GORILLA_GRAVITY     	equ $0080   ; +1

DEF GORILLA_HEIGHT 		equ 16
DEF GORILLA_WIDTH		equ 8
DEF GORILLA_NUM_SPRITES equ $08

DEF GROUND_Y equ 124	; Altura del suelo


; Física de la serpiente
DEF SNAKE_SPEED equ $0010
DEF SNAKE_SPEED_NEGATIVE equ $FFF0

DEF SNAKE_HEIGHT equ 16
DEF SNAKE_WIDTH equ 32
DEF SNAKE_NUM_SPRITES equ $04


;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;; Bullets
; == General==
DEF BULLET_PRESETS_H       equ $C1
DEF BULLET_PRESETS_ADDRESS equ $C100

; == Directions == 
DEF LEFT_SHOT_DIRECTION  equ 0
DEF RIGHT_SHOT_DIRECTION equ 1
DEF UP_SHOT_DIRECTION    equ 2
DEF DOWN_SHOT_DIRECTION  equ 3

; == Collision ==
; Player
DEF PLAYER_BULLET_COLL_Y equ 3
DEF PLAYER_BULLET_COLL_X equ 3
DEF PLAYER_BULLET_HEIGHT equ 4
DEF PLAYER_BULLET_WIDTH  equ 4

; Snake
DEF SNAKE_BULLET_COLL_Y  equ 2 ; TODO
DEF SNAKE_BULLET_COLL_X  equ 2 ; TODO
DEF SNAKE_BULLET_HEIGHT  equ 4 ; TODO: Cambiarlo por el bueno
DEF SNAKE_BULLET_WIDTH   equ 4 ; TODO: Cambiarlo por el bueno

; Spider
DEF SPIDER_BULLET_COLL_Y equ 3
DEF SPIDER_BULLET_COLL_X equ 3
DEF SPIDER_BULLET_HEIGHT equ 4
DEF SPIDER_BULLET_WIDTH  equ 4

DEF SPIDER_BIG_BULLET_0_COLL_Y equ 3
DEF SPIDER_BIG_BULLET_0_COLL_X equ 3
DEF SPIDER_BIG_BULLET_0_HEIGHT equ 4
DEF SPIDER_BIG_BULLET_0_WIDTH  equ 4

DEF SPIDER_BIG_BULLET_1_COLL_Y equ 3
DEF SPIDER_BIG_BULLET_1_COLL_X equ 3
DEF SPIDER_BIG_BULLET_1_HEIGHT equ 4
DEF SPIDER_BIG_BULLET_1_WIDTH  equ 4

; == Speeds ==
; Player
DEF PLAYER_BULLET_SPEED      equ $0300 ; 3.0
DEF PLAYER_BULLET_SPEED_HIGH equ $03   ; 
DEF PLAYER_BULLET_SPEED_LOW  equ $00   ;

; Snake
DEF SNAKE_BULLET_SPEED       equ $01F0 ; 1.5
DEF SNAKE_BULLET_SPEED_HIGH  equ $01   ; 
DEF SNAKE_BULLET_SPEED_LOW   equ $F0   ;

; Spider
DEF SPIDER_BULLET_SPEED      equ $0100 ; 1.0
DEF SPIDER_BULLET_SPEED_HIGH equ $01   ; 
DEF SPIDER_BULLET_SPEED_LOW  equ $00   ;

DEF SPIDER_BIG_BULLET_0_SPEED      equ $0100 ; 1.0
DEF SPIDER_BIG_BULLET_0_SPEED_HIGH equ $01   ; 
DEF SPIDER_BIG_BULLET_0_SPEED_LOW  equ $00   ;

DEF SPIDER_BIG_BULLET_1_SPEED      equ $0100 ; 1.0
DEF SPIDER_BIG_BULLET_1_SPEED_HIGH equ $01   ; 
DEF SPIDER_BIG_BULLET_1_SPEED_LOW  equ $00   ;

; == Tiles ==
; Player
DEF PLAYER_BULLET_TILE_H equ $20
DEF PLAYER_BULLET_TILE_V equ $22 

; Snake
DEF SNAKE_BULLET_TILE_H  equ $20 ; TODO: Cambiarlo por el real
DEF SNAKE_BULLET_TILE_V  equ $20 ; TODO: Cambiarlo por el real

;Spider
DEF SPIDER_BULLET_TILE_H equ $B2
DEF SPIDER_BULLET_TILE_V equ $B0

DEF SPIDER_BIG_BULLET_0_TILE_H equ $B8
DEF SPIDER_BIG_BULLET_0_TILE_V equ $B8

DEF SPIDER_BIG_BULLET_1_TILE_H equ $BA
DEF SPIDER_BIG_BULLET_1_TILE_V equ $BA

; == Damage ==
; Player
DEF PLAYER_BULLET_DAMAGE equ 1

; Snake
DEF SNAKE_BULLET_DAMAGE  equ 1

; Spider
DEF SPIDER_BULLET_DAMAGE equ 1
DEF SPIDER_BIG_BULLET_0_DAMAGE equ 1
DEF SPIDER_BIG_BULLET_1_DAMAGE equ 1


;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;; Player consts
DEF PLAYER_SPRITES_SIZE   equ 2
DEF PLAYER_BODY_ENTITY_ID equ 0
DEF PLAYER_GUN_ENTITY_ID  equ 1
def COOLDOWN_SHOT_DELAY equ 40

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;; Enemies consts
DEF ENEMY_START_ENTITY_ID equ 2
DEF ENEMY_START_TILE_ID   equ $80
DEF GORILLA_SPRITES_SIZE  equ 8
DEF SNAKE_SPRITES_SIZE equ 4
DEF SNAKE_LEFT_LIMIT  equ 40   ; Límite izquierdo: después del tile del borde
DEF SNAKE_RIGHT_LIMIT equ 128  ; Límite derecho: 160 - 32 (ancho) = 128
                               ; Cuando X=128, el último sprite está en X=152 (justo antes del tile derecho)